<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Automático</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gridjs/dist/gridjs.umd.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/gridjs/dist/theme/mermaid.min.css" rel="stylesheet">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .container { display: flex; flex-wrap: wrap; justify-content: space-around; }
        .card { width: 22%; background: #f4f4f4; padding: 15px; border-radius: 8px; margin: 10px; }
        #chart1, #chart2, #chart3 { width: 48%; height: 350px; display: inline-block; }
    </style>
</head>
<body>

    <h2>📊 Dashboard de Ventas</h2>

    <!-- Métricas Clave -->
    <div class="container">
        <div class="card">🔹 Total Ventas: <b id="totalVentas"></b></div>
        <div class="card">📈 Promedio Ventas: <b id="promedioVentas"></b></div>
        <div class="card">🔝 Máximo Ventas: <b id="maxVentas"></b></div>
        <div class="card">📉 Mínimo Ventas: <b id="minVentas"></b></div>
    </div>

    <!-- Gráficos -->
    <div class="container">
        <div id="chart1"></div>
        <div id="chart2"></div>
        <div id="chart3"></div>
    </div>

    <!-- Tabla de datos -->
    <div id="table"></div>

    <script>
        // 📌 Datos JSON
        const jsonData = [
            { name: "Producto A", ventas: 120, categoria: "Electrónica" },
            { name: "Producto B", ventas: 200, categoria: "Moda" },
            { name: "Producto C", ventas: 90, categoria: "Hogar" },
            { name: "Producto D", ventas: 150, categoria: "Electrónica" },
            { name: "Producto E", ventas: 180, categoria: "Moda" }
        ];

        // 📊 Cálculo de estadísticas
        const total = jsonData.reduce((sum, item) => sum + item.ventas, 0);
        const max = Math.max(...jsonData.map(item => item.ventas));
        const min = Math.min(...jsonData.map(item => item.ventas));
        const promedio = (total / jsonData.length).toFixed(2);

        // 📌 Insertar métricas clave en HTML
        document.getElementById("totalVentas").innerText = total;
        document.getElementById("promedioVentas").innerText = promedio;
        document.getElementById("maxVentas").innerText = max;
        document.getElementById("minVentas").innerText = min;

        // 📌 Mostrar tabla con Grid.js
        new gridjs.Grid({
            columns: ["Nombre", "Ventas", "Categoría"],
            data: jsonData.map(item => [item.name, item.ventas, item.categoria])
        }).render(document.getElementById("table"));

        // 📊 Gráfico de Barras (Ventas por Producto)
        const chart1 = echarts.init(document.getElementById("chart1"));
        chart1.setOption({
            title: { text: "Ventas por Producto" },
            xAxis: { type: "category", data: jsonData.map(item => item.name) },
            yAxis: { type: "value" },
            series: [{ type: "bar", data: jsonData.map(item => item.ventas), color: "#3498db" }]
        });

        // 📊 Gráfico de Pastel (Participación de Categorías)
        const categorias = [...new Set(jsonData.map(item => item.categoria))];
        const dataCategorias = categorias.map(cat => ({
            name: cat,
            value: jsonData.filter(item => item.categoria === cat).reduce((sum, item) => sum + item.ventas, 0)
        }));

        const chart2 = echarts.init(document.getElementById("chart2"));
        chart2.setOption({
            title: { text: "Ventas por Categoría" },
            series: [{ type: "pie", radius: "50%", data: dataCategorias }]
        });

        // 📊 Gráfico de Línea (Tendencias de Ventas)
        const chart3 = echarts.init(document.getElementById("chart3"));
        chart3.setOption({
            title: { text: "Tendencia de Ventas" },
            xAxis: { type: "category", data: jsonData.map(item => item.name) },
            yAxis: { type: "value" },
            series: [{ type: "line", data: jsonData.map(item => item.ventas), color: "#e74c3c" }]
        });

    </script>

</body>
</html>
